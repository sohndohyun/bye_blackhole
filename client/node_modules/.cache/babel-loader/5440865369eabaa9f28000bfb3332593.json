{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import axios from\"axios\";import useSwr from'swr';import\"./styles/UserInfoModal.scss\";import DirectGameModal from'./DirectGameModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserInfoModal=function UserInfoModal(props){var _data$history;var open=props.open,close=props.close,myID=props.myID,targetID=props.targetID;var _useState=useState(),_useState2=_slicedToArray(_useState,2),IsFriend=_useState2[0],setIsFriend=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),IsBlock=_useState4[0],setIsBlock=_useState4[1];var fetcher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(myID&&targetID)){_context.next=7;break;}_context.next=3;return axios.get(url);case 3:res=_context.sent;setIsFriend(res.data.friend);setIsBlock(res.data.block);return _context.abrupt(\"return\",res.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetcher(_x){return _ref.apply(this,arguments);};}();var _useSwr=useSwr('profile?myID='+myID+'&otherID='+targetID,fetcher),data=_useSwr.data,error=_useSwr.error;var FriendHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.put('profile/friend',{myID:myID,otherID:targetID,isFriend:!IsFriend});case 2:setIsFriend(!IsFriend);case 3:case\"end\":return _context2.stop();}}},_callee2);})),[IsFriend]);var BlockHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.put('profile/block',{myID:myID,otherID:targetID,isBlock:!IsBlock});case 2:setIsBlock(!IsBlock);case 3:case\"end\":return _context3.stop();}}},_callee3);})),[IsBlock]);//block modal\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),BlockModal=_useState6[0],setBlockModal=_useState6[1];function makeDM(){return _makeDM.apply(this,arguments);}//direct game modal\nfunction _makeDM(){_makeDM=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var chatRoomName;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(myID.localeCompare(targetID)<0)chatRoomName='DM_'+myID+'_'+targetID;else chatRoomName='DM_'+targetID+'_'+myID;_context4.next=3;return axios.post('/Lobby/chatCreate',{title:chatRoomName,password:'',owner_id:myID,security:'private'}).then(function(res){document.location.href='/chat';sessionStorage.setItem('roomName',chatRoomName);}).catch(function(err){setBlockModal(true);});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return _makeDM.apply(this,arguments);}var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),DirectGameModalState=_useState8[0],setDirectGameModalState=_useState8[1];var openDirectGameModal=function openDirectGameModal(){/*\n\t\tif (window.location.pathname === '/chat' || window.location.pathname === '/Chat')\n\t\t{\n\t\t\twindow.location.href = '/lobby'\n\t\t\tsessionStorage.removeItem('roomName')\n\t\t\tsessionStorage.setItem('directGame', targetID)\n\t\t}\n\t\t*/setDirectGameModalState(true);};var closeDirectGameModal=function closeDirectGameModal(){setDirectGameModalState(false);};function Logout(){return _Logout.apply(this,arguments);}function _Logout(){_Logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var intra_id;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:intra_id=sessionStorage.getItem('intraID');_context5.next=3;return axios.patch('log/out',{intra_id:intra_id});case 3:sessionStorage.removeItem('2auth');document.location.href='/log/in';case 5:case\"end\":return _context5.stop();}}},_callee5);}));return _Logout.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?BlockModal?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:function onClick(){close();setBlockModal(false);},children:\" \\xD7 \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"name lose-color\",children:\"DM \\uCC44\\uD305\\uBC29\\uC744 \\uC0DD\\uC131\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"hr\",{})]})})]}):/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\" \\xD7 \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:targetID}),/*#__PURE__*/_jsxs(\"span\",{className:\"num win-color\",children:[\"W \",data===null||data===void 0?void 0:data.win]}),/*#__PURE__*/_jsxs(\"span\",{className:\"num lose-color\",children:[\" \\xA0\\xA0 L \",data===null||data===void 0?void 0:data.lose]}),/*#__PURE__*/_jsxs(\"div\",{className:\"num\",children:[\"ladder \",data===null||data===void 0?void 0:data.ladder]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:data===null||data===void 0?void 0:(_data$history=data.history)===null||_data$history===void 0?void 0:_data$history.map(function(match){return/*#__PURE__*/_jsxs(\"div\",{className:match.win?'matchHistory win-backColor':'matchHistory lose-backColor',children:[/*#__PURE__*/_jsx(\"span\",{className:\"match-left\",children:match.id}),/*#__PURE__*/_jsx(\"span\",{className:match.win?'match-right win-color':'match-right lose-color',children:match.win?'Win':'Lose'})]});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:myID===targetID?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",onClick:function onClick(){return document.location.href='/Admin/';},children:/*#__PURE__*/_jsx(\"b\",{children:\"Admin\"})}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",onClick:Logout,children:/*#__PURE__*/_jsx(\"b\",{children:\"Logout\"})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"onoffbtn\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"switch1\",name:\"switch1\",className:\"input__on-off\",checked:IsFriend,onChange:FriendHandler}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"switch1\",className:\"label__on-off\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"marble\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on\",children:\"Friend\"}),/*#__PURE__*/_jsx(\"span\",{className:\"off\",children:\"Unfriend\"})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"onoffbtn\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"switch2\",name:\"switch2\",className:\"input__on-off\",checked:!IsBlock,onChange:BlockHandler}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"switch2\",className:\"label__on-off\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"marble\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on\",children:\"Unblock\"}),/*#__PURE__*/_jsx(\"span\",{className:\"off\",children:\"Block\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",onClick:openDirectGameModal,children:/*#__PURE__*/_jsx(\"b\",{children:\"Game\"})}),/*#__PURE__*/_jsx(\"a\",{className:\"btn button dm-button\",onClick:makeDM,children:/*#__PURE__*/_jsx(\"b\",{children:\"DM\"})})]})]})}),/*#__PURE__*/_jsx(DirectGameModal,{open:DirectGameModalState,close:closeDirectGameModal,targetID:targetID,closeUserInfoModal:close})]}):null});};export default UserInfoModal;","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/SideBar/UserInfoModal.tsx"],"names":["React","useState","useCallback","axios","useSwr","DirectGameModal","UserInfoModal","props","open","close","myID","targetID","IsFriend","setIsFriend","IsBlock","setIsBlock","fetcher","url","get","res","data","friend","block","error","FriendHandler","put","otherID","isFriend","BlockHandler","isBlock","BlockModal","setBlockModal","makeDM","localeCompare","chatRoomName","post","title","password","owner_id","security","then","document","location","href","sessionStorage","setItem","catch","err","DirectGameModalState","setDirectGameModalState","openDirectGameModal","closeDirectGameModal","Logout","intra_id","getItem","patch","removeItem","win","lose","ladder","history","map","match","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/UserInfoModal.scss\";\nimport DirectGameModal from './DirectGameModal';\n\nconst UserInfoModal = ( props: any) => {\n\tconst { open, close, myID, targetID} = props;\n\tconst [IsFriend, setIsFriend] = useState<boolean>()\n\tconst [IsBlock, setIsBlock] = useState<boolean>()\n\t\n\tconst fetcher = async (url:string) => {\n\t\tif (myID && targetID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\tsetIsFriend(res.data.friend)\n\t\t\tsetIsBlock(res.data.block)\n\t\t\treturn res.data;\n\t\t}\n\t}\n\n\tconst {data, error} = useSwr<{history:{win:boolean, id:string}[] ,friend:boolean, block:boolean, win:number, lose:number, ladder:number} | {history:{win:boolean, id:string}[], win:number, lose:number, ladder:number}>('profile?myID=' + myID + '&otherID=' + targetID, fetcher)\n\n\tconst FriendHandler = useCallback( async() => {\n\t\tawait axios.put('profile/friend', {myID:myID, otherID:targetID, isFriend:!IsFriend})\n\t\tsetIsFriend(!IsFriend);\n\t},[IsFriend]);\n\t\n\tconst BlockHandler = useCallback( async() => {\n\t\tawait axios.put('profile/block', {myID:myID, otherID:targetID, isBlock:!IsBlock})\n\t\tsetIsBlock(!IsBlock);\n\t},[IsBlock]);\n\n\t//block modal\n\tconst [BlockModal, setBlockModal] = useState(false);\n\n\tasync function makeDM(){\n\t\tif (myID.localeCompare(targetID) < 0)\n\t\t\tvar chatRoomName = 'DM_' + myID + '_' + targetID\n\t\telse\n\t\t\tvar chatRoomName = 'DM_' + targetID + '_' + myID\n\t\tawait axios.post('/Lobby/chatCreate', {title: chatRoomName, password:'', owner_id:myID, security:'private'})\n\t\t.then((res) => {\n\t\t\tdocument.location.href = '/chat'\n\t\t\tsessionStorage.setItem('roomName', chatRoomName)\n\t\t})\n\t\t.catch((err) => {\n\t\t\tsetBlockModal(true)\n\t\t})\n\t}\n\n\t//direct game modal\n\tconst [DirectGameModalState, setDirectGameModalState] = useState(false);\n\tconst openDirectGameModal = () => {\n\t\t/*\n\t\tif (window.location.pathname === '/chat' || window.location.pathname === '/Chat')\n\t\t{\n\t\t\twindow.location.href = '/lobby'\n\t\t\tsessionStorage.removeItem('roomName')\n\t\t\tsessionStorage.setItem('directGame', targetID)\n\t\t}\n\t\t*/\n\t\tsetDirectGameModalState(true);\n\t};\n\tconst closeDirectGameModal = () => {\n\t\tsetDirectGameModalState(false);\n\t};\n\n\tasync function Logout(){\n\t\tconst intra_id = sessionStorage.getItem('intraID')\n\t\tawait axios.patch('log/out' , {intra_id : intra_id})\n\t\tsessionStorage.removeItem('2auth')\n\t\tdocument.location.href = '/log/in'\n\t}\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? ( \n\t\t\t  BlockModal ? \n\t\t\t\t<section>\n\t\t\t\t\t<div className=\"head\">\n\t\t\t\t\t\t<button className=\"close\" onClick={() => {\n\t\t\t\t\t\t\tclose()\n\t\t\t\t\t\t\tsetBlockModal(false)\n\t\t\t\t\t\t}}> &times; </button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"header\">\n\t\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t\t<div className=\"name lose-color\">DM 채팅방을 생성할 수 없습니다.</div>\n\t\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t\t:\n\t\t\t\t<section>\n\t\t\t\t\t<div className=\"head\">\n\t\t\t\t\t\t<button className=\"close\" onClick={close}> &times; </button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"header\">\n\t\t\t\t\t\t\t<div className=\"name\">{targetID}</div>\n\t\t\t\t\t\t\t<span className=\"num win-color\">W {data?.win}</span>\n\t\t\t\t\t\t\t<span className=\"num lose-color\"> &nbsp;&nbsp; L {data?.lose}</span>\n\t\t\t\t\t\t\t<div className=\"num\">ladder {data?.ladder}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t<div className=\"main\">\n\t\t\t\t\t\t\t{data?.history?.map(match=>\n\t\t\t\t\t\t\t<div className={match.win ? 'matchHistory win-backColor' : 'matchHistory lose-backColor'}>\n\t\t\t\t\t\t\t\t<span className='match-left'>{match.id}</span>\n\t\t\t\t\t\t\t\t<span className={match.win ? 'match-right win-color' : 'match-right lose-color'}>{match.win ? 'Win' : 'Lose'}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t{myID === targetID ? \n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<a className=\"btn button\" onClick={()=> \n\t\t\t\t\t\t\t\tdocument.location.href = '/Admin/'\n\t\t\t\t\t\t\t}><b>Admin</b></a>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t<a className=\"btn button\" onClick={Logout}><b>Logout</b></a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"onoffbtn\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"switch1\" name=\"switch1\" className=\"input__on-off\" checked={IsFriend} onChange={FriendHandler}/>\n\t\t\t\t\t\t\t<label htmlFor=\"switch1\" className=\"label__on-off\">\n\t\t\t\t\t\t\t\t<span className=\"marble\"></span>\n\t\t\t\t\t\t\t\t<span className=\"on\">Friend</span>\n\t\t\t\t\t\t\t\t<span className=\"off\">Unfriend</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"onoffbtn\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"switch2\" name=\"switch2\" className=\"input__on-off\" checked={!IsBlock} onChange={BlockHandler}/>\n\t\t\t\t\t\t\t<label htmlFor=\"switch2\" className=\"label__on-off\">\n\t\t\t\t\t\t\t\t<span className=\"marble\"></span>\n\t\t\t\t\t\t\t\t<span className=\"on\">Unblock</span>\n\t\t\t\t\t\t\t\t<span className=\"off\">Block</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<a className=\"btn button\" onClick={openDirectGameModal}><b>Game</b></a>\n\t\t\t\t\t\t\t<a className=\"btn button dm-button\" onClick={makeDM}><b>DM</b></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<DirectGameModal open={DirectGameModalState} close={closeDirectGameModal} targetID={targetID} closeUserInfoModal={close}/>\n\t\t\t\t</section>\n\t\t\t): null }\n\t\t</div>\n\t)\n}\n\nexport default UserInfoModal"]},"metadata":{},"sourceType":"module"}