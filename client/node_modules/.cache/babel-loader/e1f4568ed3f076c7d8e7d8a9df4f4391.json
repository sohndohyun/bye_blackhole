{"ast":null,"code":"import _slicedToArray from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import useSwr from'swr';import React,{useState,useCallback}from'react';import\"./styles/ChatSettingModal.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChatSettingModal=function ChatSettingModal(props){var open=props.open,close=props.close,chatRoomID=props.chatRoomID,MyPermission=props.MyPermission;function changePWD(){return _changePWD.apply(this,arguments);}function _changePWD(){_changePWD=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('chat/setting',{title:chatRoomID,password:RoomPWD});case 2:close();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _changePWD.apply(this,arguments);}var fetcher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!chatRoomID){_context.next=5;break;}_context.next=3;return axios.get(url);case 3:res=_context.sent;return _context.abrupt(\"return\",res.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetcher(_x){return _ref.apply(this,arguments);};}();var _useSwr=useSwr('Chat/banList?title='+chatRoomID,fetcher),data=_useSwr.data,error=_useSwr.error,mutate=_useSwr.mutate;function Unban(_x2){return _Unban.apply(this,arguments);}function _Unban(){_Unban=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get('chat/unban?title='+chatRoomID+'&id='+user);case 2:mutate();case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _Unban.apply(this,arguments);}var _useState=useState(''),_useState2=_slicedToArray(_useState,2),RoomPWD=_useState2[0],setRoomPWD=_useState2[1];var handelRoomPWD=useCallback(function(e){setRoomPWD(e.target.value);},[]);return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"header\",{children:[\"Setting\",/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\" \\xD7 \"})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"ban-name\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Banned users\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ban-box\",children:data===null||data===void 0?void 0:data.map(function(user){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ban-inlineBox\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ban-user\",children:user}),/*#__PURE__*/_jsx(\"span\",{className:\"unban\",onClick:function onClick(){return Unban(user);},children:/*#__PURE__*/_jsx(\"a\",{className:\"btn unban-btn\",children:\"x\"})})]}),/*#__PURE__*/_jsx(\"hr\",{})]});})}),MyPermission==='owner'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),\"new password:\\xA0\",/*#__PURE__*/_jsx(\"input\",{onChange:handelRoomPWD,value:RoomPWD}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary btn-sm\",onClick:changePWD,children:/*#__PURE__*/_jsx(\"b\",{children:\"Change\"})})]}):null]}),/*#__PURE__*/_jsx(\"footer\",{})]}):null});};export default ChatSettingModal;","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/Chat/ChatSettingModal.tsx"],"names":["axios","useSwr","React","useState","useCallback","ChatSettingModal","props","open","close","chatRoomID","MyPermission","changePWD","post","title","password","RoomPWD","fetcher","url","get","res","data","error","mutate","Unban","user","setRoomPWD","handelRoomPWD","e","target","value","map"],"mappings":"seAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,KAAnB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,WAAzB,KAA2C,OAA3C,CACA,MAAO,gCAAP,C,6IAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAEC,KAAF,CAAkB,IAClCC,CAAAA,IADkC,CACOD,KADP,CAClCC,IADkC,CAC5BC,KAD4B,CACOF,KADP,CAC5BE,KAD4B,CACrBC,UADqB,CACOH,KADP,CACrBG,UADqB,CACTC,YADS,CACOJ,KADP,CACTI,YADS,SAG3BC,CAAAA,SAH2B,qIAG1C,+JACOX,CAAAA,KAAK,CAACY,IAAN,CAAW,cAAX,CAA4B,CAACC,KAAK,CAACJ,UAAP,CAAmBK,QAAQ,CAACC,OAA5B,CAA5B,CADP,QAECP,KAAK,GAFN,wDAH0C,4CAQ1C,GAAMQ,CAAAA,OAAO,0FAAG,iBAAOC,GAAP,8HACXR,UADW,+CAGIT,CAAAA,KAAK,CAACkB,GAAN,CAAUD,GAAV,CAHJ,QAGRE,GAHQ,+CAIPA,GAAG,CAACC,IAJG,wDAAH,kBAAPJ,CAAAA,OAAO,4CAAb,CAR0C,YAeZf,MAAM,CAAgB,sBAAwBQ,UAAxC,CAAoDO,OAApD,CAfM,CAenCI,IAfmC,SAenCA,IAfmC,CAe7BC,KAf6B,SAe7BA,KAf6B,CAetBC,MAfsB,SAetBA,MAfsB,SAiB3BC,CAAAA,KAjB2B,4HAiB1C,kBAAqBC,IAArB,6IACOxB,CAAAA,KAAK,CAACkB,GAAN,CAAU,oBAAsBT,UAAtB,CAAmC,MAAnC,CAA4Ce,IAAtD,CADP,QAECF,MAAM,GAFP,wDAjB0C,sDAsBZnB,QAAQ,CAAC,EAAD,CAtBI,wCAsBnCY,OAtBmC,eAsB1BU,UAtB0B,eAuB1C,GAAMC,CAAAA,aAAa,CAAGtB,WAAW,CAAC,SAACuB,CAAD,CAAW,CAC5CF,UAAU,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV,CACA,CAFgC,CAE9B,EAF8B,CAAjC,CAIA,mBACC,YAAK,SAAS,CAAGtB,IAAI,CAAG,iBAAH,CAAuB,OAA5C,UACGA,IAAI,cACL,wCACC,iDAEC,eAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAEC,KAAnC,oBAFD,GADD,cAKC,qCACC,YAAK,SAAS,CAAC,UAAf,uBAA0B,mCAA1B,EADD,cAEC,YAAK,SAAS,CAAC,SAAf,UACEY,IADF,SACEA,IADF,iBACEA,IAAI,CAAEU,GAAN,CAAU,SAAAN,IAAI,qBACd,wCACA,aAAK,SAAS,CAAC,eAAf,wBACC,aAAM,SAAS,CAAC,UAAhB,UAA4BA,IAA5B,EADD,cAEC,aAAM,SAAS,CAAC,OAAhB,CAAwB,OAAO,CAAE,yBAAMD,CAAAA,KAAK,CAACC,IAAD,CAAX,EAAjC,uBAAoD,UAAG,SAAS,CAAC,eAAb,eAApD,EAFD,GADA,cAKC,aALD,GADc,EAAd,CADF,EAFD,CAaEd,YAAY,GAAK,OAAjB,cACA,wCACA,aADA,kCAGA,cAAO,QAAQ,CAAEgB,aAAjB,CAAgC,KAAK,CAAEX,OAAvC,EAHA,qBAKA,UAAG,SAAS,CAAC,wBAAb,CAAsC,OAAO,CAAEJ,SAA/C,uBAA0D,6BAA1D,EALA,GADA,CAQE,IArBJ,GALD,cA6BC,iBA7BD,GADK,CAiCF,IAlCL,EADD,CAsCA,CAjED,CAmEA,cAAeN,CAAAA,gBAAf","sourcesContent":["import axios from 'axios';\nimport useSwr from 'swr';\nimport React, {useState, useCallback} from 'react';\nimport \"./styles/ChatSettingModal.scss\";\n\nconst ChatSettingModal = ( props: any ) => {\n\tconst { open, close, chatRoomID, MyPermission} = props;\n\n\tasync function changePWD(){\n\t\tawait axios.post('chat/setting' , {title:chatRoomID, password:RoomPWD})\n\t\tclose();\n\t}\n\n\tconst fetcher = async (url:string) => {\n\t\tif (chatRoomID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\treturn res.data;\n\t\t}\n\t}\n\tconst {data, error, mutate} = useSwr<{id:string}[]>('Chat/banList?title=' + chatRoomID, fetcher)\n\n\tasync function Unban(user: {id:string}){\n\t\tawait axios.get('chat/unban?title=' + chatRoomID + '&id=' + user)\n\t\tmutate()\n\t}\n\n\tconst [RoomPWD, setRoomPWD] = useState('');\n\tconst handelRoomPWD = useCallback((e:any) => {\n\t\tsetRoomPWD(e.target.value)\n\t}, []);\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? (\n\t\t\t\t<section>\n\t\t\t\t\t<header>\n\t\t\t\t\t\tSetting\n\t\t\t\t\t\t<button className=\"close\" onClick={close}> &times; </button>\n\t\t\t\t\t</header>\n\t\t\t\t\t<main>\n\t\t\t\t\t\t<div className=\"ban-name\"><b>Banned users</b></div>\n\t\t\t\t\t\t<div className=\"ban-box\">\n\t\t\t\t\t\t\t{data?.map(user => \n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"ban-inlineBox\">\n\t\t\t\t\t\t\t\t\t<span className=\"ban-user\">{user}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"unban\" onClick={() => Unban(user)}><a className=\"btn unban-btn\">x</a></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{MyPermission === 'owner' ? \n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\tnew password:&nbsp;\n\t\t\t\t\t\t\t<input onChange={handelRoomPWD} value={RoomPWD}></input>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t<a className=\"btn btn-primary btn-sm\" onClick={changePWD}><b>Change</b></a>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</main>\n\t\t\t\t\t<footer>\n\t\t\t\t\t</footer>\n\t\t\t\t</section>\n\t\t\t) : null }\n\t\t</div>\n\t)\n}\n\nexport default ChatSettingModal"]},"metadata":{},"sourceType":"module"}