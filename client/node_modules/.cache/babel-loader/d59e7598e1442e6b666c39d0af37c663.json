{"ast":null,"code":"import _regeneratorRuntime from\"/home/sayi/ft/qa/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sayi/ft/qa/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sayi/ft/qa/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./styles/Admin.scss';import'bootstrap/dist/css/bootstrap.min.css';import{allImages,findImg}from'../Images/Images';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),IntraID=_useState2[0],setIntraID=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Nickname=_useState4[0],setNickname=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Icon=_useState6[0],setIcon=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),OldNickname=_useState8[0],setOldNickname=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),OldIcon=_useState10[0],setOldIcon=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),SignUp=_useState12[0],setSignUp=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),IsUnique=_useState14[0],setIsUnique=_useState14[1];useEffect(function(){var intra_id=sessionStorage.getItem('intraID');if(intra_id)setIntraID(intra_id);var old_nickname=sessionStorage.getItem('nickname');if(old_nickname){setOldNickname(old_nickname);setSignUp(false);}var old_icon=sessionStorage.getItem('icon');if(old_icon)setOldIcon(old_icon);});var handleNicknameChange=function handleNicknameChange(e){setNickname(e.target.value);};var handleIconChange=function handleIconChange(e){setIcon(e.target.value);};function saveAdmin(_x){return _saveAdmin.apply(this,arguments);}function _saveAdmin(){_saveAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(isSignUp){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:body={intra_id:IntraID,icon:Icon?Icon:OldIcon,nickname:Nickname?Nickname:OldNickname};if(SignUp){_context.next=6;break;}_context.next=4;return axios.patch('/admin',body).then(function(Response){if(Nickname)sessionStorage.setItem('nickname',Nickname);if(Icon)sessionStorage.setItem('icon',Icon);document.location.href='/lobby';}).catch(function(Error){setIsUnique(false);});case 4:_context.next=8;break;case 6:_context.next=8;return axios.post('/admin',body).then(function(Response){if(Nickname)sessionStorage.setItem('nickname',Nickname);if(Icon)sessionStorage.setItem('icon',Icon);document.location.href='/lobby';}).catch(function(Error){setIsUnique(false);});case 8:case\"end\":return _context.stop();}}},_callee);}));return _saveAdmin.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-container\",children:[SignUp?null:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:findImg(OldIcon),width:\"30\",height:\"30\"}),\"\\xA0\",OldNickname,/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsx(\"input\",{onChange:handleNicknameChange,placeholder:\"Nickname\",maxLength:10}),IsUnique?null:/*#__PURE__*/_jsx(\"div\",{className:\"nickname-error\",children:\"\\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC740 \\uAC12\\uC785\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-box\",children:allImages.map(function(_ref){var value=_ref.value,src=_ref.src;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"icon\",value:value,onChange:handleIconChange,className:\"icon-input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"img\",{src:src,width:\"50\",height:\"50\",className:\"icon-img\"})})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"Join-button\",children:SignUp&&(!Nickname||!Icon)?null:/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-dark\",onClick:function onClick(){return saveAdmin(SignUp);},children:/*#__PURE__*/_jsx(\"b\",{children:\"OK\"})})})]});};export default Admin;","map":{"version":3,"sources":["/home/sayi/ft/qa/client/src/Admin/Admin.tsx"],"names":["React","useEffect","useState","allImages","findImg","axios","Admin","IntraID","setIntraID","Nickname","setNickname","Icon","setIcon","OldNickname","setOldNickname","OldIcon","setOldIcon","SignUp","setSignUp","IsUnique","setIsUnique","intra_id","sessionStorage","getItem","old_nickname","old_icon","handleNicknameChange","e","target","value","handleIconChange","saveAdmin","isSignUp","body","icon","nickname","patch","then","Response","setItem","document","location","href","catch","Error","post","map","src"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './styles/Admin.scss';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { allImages, findImg } from '../Images/Images';\nimport axios from 'axios';\n\nconst Admin = () => {\n  const [IntraID, setIntraID] = useState('');\n  const [Nickname, setNickname] = useState('');\n  const [Icon, setIcon] = useState('');\n  const [OldNickname, setOldNickname] = useState('');\n  const [OldIcon, setOldIcon] = useState('');\n  const [SignUp, setSignUp] = useState(true);\n  const [IsUnique, setIsUnique] = useState(true);\n\n  useEffect(() => {\n    const intra_id = sessionStorage.getItem('intraID');\n    if (intra_id) setIntraID(intra_id);\n\n    const old_nickname = sessionStorage.getItem('nickname');\n    if (old_nickname) {\n      setOldNickname(old_nickname);\n      setSignUp(false);\n    }\n\n    const old_icon = sessionStorage.getItem('icon');\n    if (old_icon) setOldIcon(old_icon);\n  });\n\n  const handleNicknameChange = (e: any) => {\n    setNickname(e.target.value);\n  };\n  const handleIconChange = (e: any) => {\n    setIcon(e.target.value);\n  };\n\n  async function saveAdmin(isSignUp: boolean) {\n    const body = {\n      intra_id: IntraID,\n      icon: Icon ? Icon : OldIcon,\n      nickname: Nickname ? Nickname : OldNickname,\n    };\n    if (!SignUp) {\n      await axios\n        .patch('/admin', body)\n        .then((Response) => {\n          if (Nickname) sessionStorage.setItem('nickname', Nickname);\n          if (Icon) sessionStorage.setItem('icon', Icon);\n          document.location.href = '/lobby';\n        })\n        .catch((Error) => {\n          setIsUnique(false);\n        });\n    } else {\n      await axios\n        .post('/admin', body)\n        .then((Response) => {\n          if (Nickname) sessionStorage.setItem('nickname', Nickname);\n          if (Icon) sessionStorage.setItem('icon', Icon);\n          document.location.href = '/lobby';\n        })\n        .catch((Error) => {\n          setIsUnique(false);\n        });\n    }\n  }\n\n  return (\n    <div className=\"Admin-container\">\n      {SignUp ? null : (\n        <div>\n          <img src={findImg(OldIcon)} width=\"30\" height=\"30\" />\n          &nbsp;{OldNickname}\n          <hr />\n        </div>\n      )}\n      <input\n        onChange={handleNicknameChange}\n        placeholder=\"Nickname\"\n        maxLength={10}\n      />\n      {IsUnique ? null : (\n        <div className=\"nickname-error\">유효하지 않은 값입니다.</div>\n      )}\n\n      <div className=\"icon-box\">\n        {allImages.map(({ value, src }) => (\n          <>\n            <input\n              type=\"radio\"\n              name=\"icon\"\n              value={value}\n              onChange={handleIconChange}\n              className=\"icon-input\"\n            />\n            <span className=\"icon\">\n              <img src={src} width=\"50\" height=\"50\" className=\"icon-img\"></img>\n            </span>\n          </>\n        ))}\n      </div>\n\n      <div className=\"Join-button\">\n        {SignUp && (!Nickname || !Icon) ? null : (\n          <a className=\"btn btn-dark\" onClick={() => saveAdmin(SignUp)}>\n            <b>OK</b>\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}