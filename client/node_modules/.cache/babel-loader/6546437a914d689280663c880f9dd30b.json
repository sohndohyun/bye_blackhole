{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sohndohyun/works/transcendence/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import useSwr from'swr';import React,{useState}from'react';import\"../SideBar/styles/UserInfoModal.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserListModal=function UserListModal(props){var open=props.open,close=props.close,targetID=props.targetID,roomName=props.roomName,getRoomInfoMutate=props.getRoomInfoMutate;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),IsMute=_useState2[0],setIsMute=_useState2[1];function kickUser(){return _kickUser.apply(this,arguments);}function _kickUser(){_kickUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get('chat/kick?title='+roomName+'&id='+targetID);case 2:close();getRoomInfoMutate();case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _kickUser.apply(this,arguments);}function BanUser(){return _BanUser.apply(this,arguments);}function _BanUser(){_BanUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get('chat/ban?title='+roomName+'&id='+targetID);case 2:close();getRoomInfoMutate();case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _BanUser.apply(this,arguments);}var fetcher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(roomName&&targetID)){_context.next=6;break;}_context.next=3;return axios.get(url);case 3:res=_context.sent;setIsMute(res.data.isMuted);return _context.abrupt(\"return\",res.data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetcher(_x){return _ref.apply(this,arguments);};}();var _useSwr=useSwr('chat/mute?title='+roomName+'&id='+targetID,fetcher),data=_useSwr.data,error=_useSwr.error;var muteHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.put('chat/mute',{title:roomName,id:targetID,isMuted:!IsMute});case 2:setIsMute(!IsMute);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function muteHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\" \\xD7 \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content targetID\",children:targetID}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"onoffbtn\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"switch1\",name:\"switch1\",className:\"input__on-off\",checked:IsMute,onChange:muteHandler}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"switch1\",className:\"label__on-off\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"marble\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on\",children:\"Mute\"}),/*#__PURE__*/_jsx(\"span\",{className:\"off\",children:\"Unmute\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",onClick:kickUser,children:/*#__PURE__*/_jsx(\"b\",{children:\"Kick\"})})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn button kick-button\",onClick:BanUser,children:/*#__PURE__*/_jsx(\"b\",{children:\"Ban\"})})})]})]})]}):null});};export default UserListModal;","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/Chat/UserListModal.tsx"],"names":["axios","useSwr","React","useState","UserListModal","props","open","close","targetID","roomName","getRoomInfoMutate","IsMute","setIsMute","kickUser","get","BanUser","fetcher","url","res","data","isMuted","error","muteHandler","put","title","id"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport useSwr from 'swr';\nimport React, { useEffect, useState, useCallback } from 'react';\nimport \"../SideBar/styles/UserInfoModal.scss\";\n\nconst UserListModal = ( props: any ) => {\n\tconst { open, close, targetID, roomName, getRoomInfoMutate} = props;\n\n\tconst [IsMute, setIsMute] = useState(false)\n\n\tasync function kickUser(){\n\t\tawait axios.get('chat/kick?title=' + roomName + '&id=' + targetID)\n\t\tclose()\n\t\tgetRoomInfoMutate()\n\t}\n\n\tasync function BanUser(){\n\t\tawait axios.get('chat/ban?title=' + roomName + '&id=' + targetID)\n\t\tclose()\n\t\tgetRoomInfoMutate()\n\t}\n\n\tconst fetcher = async (url:string) => {\n\t\tif (roomName && targetID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\tsetIsMute(res.data.isMuted);\n\t\t\treturn res.data;\n\t\t}\n\t}\n\n\tconst {data, error} = useSwr<{isMuted:boolean}>('chat/mute?title=' + roomName + '&id=' + targetID, fetcher)\n\n\tconst muteHandler = async() => {\n\t\tawait axios.put('chat/mute', {title:roomName, id:targetID, isMuted : !IsMute})\n\t\tsetIsMute(!IsMute);\n\t};\n\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? (\n\t\t\t\t<section>\n\t\t\t\t\t<div className=\"head\">\n\t\t\t\t\t\t<button className=\"close\" onClick={close}> &times; </button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"content targetID\">\n\t\t\t\t\t\t{targetID}\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr/>\n\t\t\t\t\t<div className='bottom'>\n\t\t\t\t\t\t<span className=\"onoffbtn\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"switch1\" name=\"switch1\" className=\"input__on-off\" checked={IsMute} onChange={muteHandler}/>\n\t\t\t\t\t\t\t<label htmlFor=\"switch1\" className=\"label__on-off\">\n\t\t\t\t\t\t\t\t<span className=\"marble\"></span>\n\t\t\t\t\t\t\t\t<span className=\"on\">Mute</span>\n\t\t\t\t\t\t\t\t<span className=\"off\">Unmute</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span><a className=\"btn button\" onClick={kickUser}><b>Kick</b></a></span>\n\t\t\t\t\t\t\t<span><a className=\"btn button kick-button\" onClick={BanUser}><b>Ban</b></a></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t) : null }\n\t\t</div>\n\t)\n}\n\nexport default UserListModal"]},"metadata":{},"sourceType":"module"}